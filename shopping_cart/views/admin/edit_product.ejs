<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/admin.css">
  <title>Edit Product</title>
  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>
</head>

<body>
  <%- include ('../_layouts/admin_header') %>
  <h1>Edit Product here</h1>
  <a href="/admin/products">Back to all products</a>
  <form action="/admin/products/edit-product" method="post" enctype="multipart/form-data">
    <div class="form-group">
      Title: <input class="form-control" type="text" name="title" value="<%= title %>"><br>
    </div>
    <div class="form-group">
      Description: <input type="text" class="form-control" name="desc" value="<%= desc %>"><br>
    </div>
    <div class="form-group">
      Category:
      <select name="category" class="form-control">
        <% categories.forEach(function (cat) { %>
        <option <%= category == cat ? 'selected' : '' %> </option> value="<%= cat.title %>"><%= cat.title %></option>
        <% }); %>
      </select>
    </div>
    <div class="form-group">
      Price: <input type="text" class="form-control" name="price" value="<%= price %>"><br>
    </div>
    <div class="form-group">  
      Img: <input type="file" class="form-control" id="img" name="img">
      <img src="#" id="imgPreview" alt="preview img">
      <br>
    </div>
    <input type="hidden" name="pimg" value="<%= img %>">
    <button>Submit</button>
  </form>
  <%- include ('../_layouts/admin_footer') %>
  <script>
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $("#imgPreview").attr('src', e.target.result).width(100).height(100);
        }

        reader.readAsDataURL(input.files[0]);
      }
    }

    $("#img").change(function () {
      readURL(this);
    })
  </script>
</body>

</html>